<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      >
    <h:head rendered="#{CUsuario.soloVisibleParaAdmin(true)}">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <ui:include src="/menu.xhtml"/>
        <title>Compras pendientes</title>
    </h:head>
    <h:body>
        <ui:fragment rendered="${cCompra.pendientes.isEmpty()}">
            Â¡No hay compras pendientes!
        </ui:fragment>
        <ui:fragment rendered="${!cCompra.pendientes.isEmpty()}">
            <div class="panel panel-default center-block" style="width: 700px;">
                <!-- Default panel contents -->
                <div class="panel-heading">Pedidos pendientes</div>

                <!-- Table -->
                <h:form>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Procesar</th>
                                <th>Fecha</th>
                                <th>Total</th>
                                <th>Usuario</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ui:repeat value="${cCompra.pendientes}" var="p">
                                <tr>
                                    <td>
                                        <input type="checkbox" name="${p.id}"/>
                                    </td>
                                    <td>${p.fecha}</td>
                                    <td>$${p.total}</td>
                                    <td>${p.cliente.getNombre()}</td>
                                </tr>
                            </ui:repeat>                    
                        </tbody>
                    </table>
                    <div style="margin: auto; position:relative; top:25%; width: 20%;">
                        <h:commandButton action="#{cCompra.procesarPedidos()}" value="Procesar pedidos" styleClass="btn btn-primary btn-lg"/>
                    </div>
                </h:form>
            </div>
        </ui:fragment>
    </h:body>
</html>

